variables:
  github_repo_url: https://github.com/devKanishk15/kestra-project.git

id: git_clone
namespace: project.devops


tasks:
  - id: working_dir
    typ
  - id: clone
    type: io.kestra.plugin.git.Clone
    url: "{{ vars.github_repo_url }}"
    branch: main


id: push_to_git
namespace: project.dev
tasks:
  - id: commit_and_push
    type: io.kestra.plugin.git.PushNamespaceFiles
    namespace: "{{flow.namespace}}"
    files: "**" 
    gitDirectory: kestra-project
    url: https://github.com/devKanishk15/kestra-project.git
    username: devKanishk15
    password: "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"
    branch: main
    commitMessage: "Added from kestra UI"
    dryRun: true  


id: sync_from_git
namespace: project.dev

tasks:
  - id: git
    type: io.kestra.plugin.git.SyncNamespaceFiles
    namespace:  "{{flow.namespace}}"
    gitDirectory: "**" # optional; set to _files by default
    url: https://github.com/devKanishk15/kestra-project.git
    branch: main
    username: devKanishk15
    password: "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"